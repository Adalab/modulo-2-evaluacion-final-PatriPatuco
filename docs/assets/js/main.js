"use strict";const formSearch=document.querySelector(".js__search-form"),inputSearch=document.querySelector(".js__search-input"),btnSearch=document.querySelector(".js__search-button"),btnReset=document.querySelector(".js__reset-button"),drinksList=document.querySelector(".js__drinks-list"),drinkItem=document.querySelector(".js__drink"),favList=document.querySelector(".js__fav-list"),favBtn=document.querySelector(".js__delete-btn-favs");let cocktailsData=[],favCoctailsData=[],localDrink=JSON.parse(localStorage.getItem("cocktails"));function printList(t){drinksList.innerHTML="";for(const e of t){const t=document.createElement("li");t.setAttribute("class","main__drinks-list--item js__drink"),t.setAttribute("id",e.idDrink),drinksList.appendChild(t);const a=document.createElement("h3"),i=document.createTextNode(e.strDrink);a.appendChild(i),a.setAttribute("class","main__drinks-list--item-name"),t.appendChild(a);const n=e.idDrink;if(favCoctailsData.find(t=>t.idDrink===n)||0===favCoctailsData.lenght?t.classList.add("selected"):t.classList.remove("selected"),e.strDrinkThumb){const a=document.createElement("img");a.setAttribute("class","main__drinks-list--item-img"),a.setAttribute("src",e.strDrinkThumb+"/preview"),t.appendChild(a)}else{const e=document.createElement("img");t.setAttribute("class","main__drinks-list--item-img"),e.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV"),t.appendChild(e)}}selectDrinkEvent()}function defaultFetch(){fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita").then(t=>t.json()).then(t=>{cocktailsData=t.drinks,printList(cocktailsData)})}function inputFetch(){const t=inputSearch.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+t).then(t=>t.json()).then(t=>{cocktailsData=t.drinks,printList(cocktailsData),printFavList(favCoctailsData)})}function handleBtnSearch(t){t.preventDefault(),inputSearch.value?inputFetch():defaultFetch()}function handleBtnReset(t){inputSearch.value="",t.preventDefault(),defaultFetch()}function printFavList(t){favList.innerHTML="",0===t.length?favBtn.classList.add("hidden"):favBtn.classList.remove("hidden");for(const e of t){const t=document.createElement("li");t.setAttribute("class","main__fav-list--item js__drink"),t.setAttribute("id",e.idDrink),favList.appendChild(t);const a=document.createElement("h3"),i=document.createTextNode(e.strDrink);a.appendChild(i),a.setAttribute("class","main__fav-list--item-name"),t.appendChild(a);const n=document.createElement("i");if(n.setAttribute("class","fa-solid fa-circle-xmark js__remove-fav"),n.setAttribute("id",e.idDrink),t.appendChild(n),e.strDrinkThumb){const a=document.createElement("img");a.setAttribute("class","main__fav-list--item-img"),a.setAttribute("src",e.strDrinkThumb+"/preview"),t.appendChild(a)}else{const e=document.createElement("img");t.setAttribute("class","main__fav-list--item-img"),e.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV"),t.appendChild(e)}}favIconsEvent()}function handleClickDrink(t){t.currentTarget.classList.toggle("selected");const e=t.currentTarget.id,a=cocktailsData.find(t=>t.idDrink===e),i=favCoctailsData.findIndex(t=>t.idDrink===e);-1===i?(favCoctailsData.push(a),localStorage.setItem("cocktails",JSON.stringify(favCoctailsData)),console.log("drink added to local",localDrink),printFavList(favCoctailsData)):(favCoctailsData.splice(i,1),localStorage.setItem("cocktails",JSON.stringify(favCoctailsData)),localDrink=JSON.parse(localStorage.getItem("cocktails")),console.log("drink removed from local",localDrink),printFavList(favCoctailsData))}function handleClickIcon(t){const e=t.target.id,a=(cocktailsData.find(t=>t.idDrink===e),favCoctailsData.findIndex(t=>t.idDrink===e));a&&(favCoctailsData.splice(a,1),localStorage.setItem("cocktails",JSON.stringify(favCoctailsData)),localDrink=JSON.parse(localStorage.getItem("cocktails")),printFavList(favCoctailsData),printList(cocktailsData))}function handleFavBtn(t){t.preventDefault(),favCoctailsData=[],localDrink=localStorage.removeItem("cocktails"),printFavList(favCoctailsData);const e=document.querySelectorAll(".js__drink");for(const t of e)t.classList.remove("selected")}function selectDrinkEvent(){const t=document.querySelectorAll(".js__drink");for(const e of t)e.addEventListener("click",handleClickDrink)}function favIconsEvent(){const t=document.querySelectorAll(".js__remove-fav");for(const e of t)e.addEventListener("click",handleClickIcon)}defaultFetch(),localDrink&&(favCoctailsData=localDrink,printFavList(favCoctailsData)),btnSearch.addEventListener("click",handleBtnSearch),formSearch.addEventListener("submit",handleBtnSearch),btnReset.addEventListener("click",handleBtnReset),favBtn.addEventListener("click",handleFavBtn);